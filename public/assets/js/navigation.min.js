class NavbarManager{constructor(){this.elements=this.cacheElements(),this.state={activeDropdown:null,activeMegaMenu:null,activeSubmenu:null,mobileMenuOpen:!1,isTouch:this.isTouchDevice()},this.bindEvents()}isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}cacheElements(){return{toggles:document.querySelectorAll(".te-navbar-toggle"),mobileMenus:document.querySelectorAll(".te-navbar-nav-mobile"),dropdownButtons:document.querySelectorAll("[data-dropdown]"),dropdownContents:document.querySelectorAll(".te-navbar-dropdown-content"),submenuLinks:document.querySelectorAll(".te-navbar-link-has-submenu"),megaMenuLinks:document.querySelectorAll(".te-navbar-link-has-mega-menu"),megaMenus:document.querySelectorAll(".te-navbar-mega-menu"),submenuContents:document.querySelectorAll(".te-navbar-submenu-content"),mobileSubmenuLinks:document.querySelectorAll(".te-navbar-link-mobile-has-submenu"),mobileSubmenus:document.querySelectorAll(".te-navbar-submenu-mobile")}}bindEvents(){try{this.initMobileMenu(),this.initDropdowns(),this.initSubmenus(),this.initMegaMenus(),this.initMobileSubmenus(),this.initGlobalEvents()}catch(e){}}initMobileMenu(){this.elements.toggles.forEach((e,t)=>{e&&e.addEventListener("click",e=>{e.preventDefault(),this.toggleMobileMenu(t)})})}toggleMenuIcon(e,t){const s=e.querySelector("svg");s&&(s.innerHTML=t?'<path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"></path>':'<path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16M4 18h16"></path>')}toggleMobileMenu(e){const t=this.elements.mobileMenus[e],s=this.elements.toggles[e];if(!t||!s)return;const n=t.classList.contains("te-navbar-nav-mobile-show");this.closeAllMobileMenus(),n?(this.state.mobileMenuOpen=!1,this.toggleMenuIcon(s,!1)):(t.classList.add("te-navbar-nav-mobile-show"),this.state.mobileMenuOpen=!0,this.toggleMenuIcon(s,!0))}initDropdowns(){this.elements.dropdownButtons.forEach(e=>{if(!e)return;const t=this.getDropdownContent(e);t&&(e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.toggleDropdown(t)}),t.addEventListener("click",e=>{e.stopPropagation()}))})}getDropdownContent(e){const t=e.closest(".te-navbar-dropdown");return t?.querySelector(".te-navbar-dropdown-content")}toggleDropdown(e){const t=e.classList.contains("te-dropdown-show");this.closeAllDropdowns(),this.closeAllSubmenus(),this.closeAllMegaMenus(),t?this.state.activeDropdown=null:(e.classList.add("te-dropdown-show"),this.state.activeDropdown=e)}initSubmenus(){this.elements.submenuLinks.forEach(e=>{if(!e)return;const t=this.getSubmenuContent(e);if(!t)return;const s=e.closest(".te-navbar-dropdown");s&&(this.state.isTouch?e.addEventListener("click",e=>{t&&(e.preventDefault(),e.stopPropagation(),this.toggleSubmenu(t))}):(s.addEventListener("mouseenter",()=>{this.showSubmenu(t)}),s.addEventListener("mouseleave",()=>{this.hideSubmenu(t)})))})}getSubmenuContent(e){const t=e.closest(".te-navbar-dropdown");return t?.querySelector(".te-navbar-submenu-content")}toggleSubmenu(e){const t=e.classList.contains("te-submenu-show");this.closeAllSubmenus(),t?this.state.activeSubmenu=null:this.showSubmenu(e)}showSubmenu(e){this.closeAllSubmenus(),this.closeAllMegaMenus(),this.closeAllDropdowns(),e.classList.add("te-submenu-show"),this.state.activeSubmenu=e}hideSubmenu(e){e.classList.remove("te-submenu-show"),this.state.activeSubmenu===e&&(this.state.activeSubmenu=null)}initMobileSubmenus(){this.elements.mobileSubmenuLinks.forEach(e=>{e&&e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const s=e.nextElementSibling;s&&s.classList.contains("te-navbar-submenu-mobile")&&this.toggleMobileSubmenu(e,s)})})}toggleMobileSubmenu(e,t){const s=t.classList.contains("te-submenu-mobile-open");this.elements.mobileSubmenus.forEach(e=>{e!==t&&e.classList.remove("te-submenu-mobile-open")}),this.elements.mobileSubmenuLinks.forEach(t=>{t!==e&&t.classList.remove("te-mobile-submenu-open")}),s?(t.classList.remove("te-submenu-mobile-open"),e.classList.remove("te-mobile-submenu-open")):(t.classList.add("te-submenu-mobile-open"),e.classList.add("te-mobile-submenu-open"))}closeAllMobileSubmenus(){this.elements.mobileSubmenus.forEach(e=>{e?.classList.remove("te-submenu-mobile-open")}),this.elements.mobileSubmenuLinks.forEach(e=>{e?.classList.remove("te-mobile-submenu-open")})}initMegaMenus(){this.elements.megaMenuLinks.forEach(e=>{if(!e)return;const t=this.getMegaMenuContent(e);if(!t)return;const s=e.closest(".te-navbar-mega-dropdown");s&&(this.state.isTouch?e.addEventListener("click",e=>{t&&(e.preventDefault(),e.stopPropagation(),this.toggleMegaMenu(t))}):(s.addEventListener("mouseenter",()=>{this.showMegaMenu(t)}),s.addEventListener("mouseleave",()=>{this.hideMegaMenu(t)})))})}getMegaMenuContent(e){const t=e.closest(".te-navbar-mega-dropdown");return t?.querySelector(".te-navbar-mega-menu")}toggleMegaMenu(e){const t=e.classList.contains("te-mega-menu-show");this.closeAllMegaMenus(),t?this.state.activeMegaMenu=null:this.showMegaMenu(e)}showMegaMenu(e){this.closeAllMegaMenus(),this.closeAllSubmenus(),this.closeAllDropdowns(),e.classList.add("te-mega-menu-show"),this.state.activeMegaMenu=e}hideMegaMenu(e){e.classList.remove("te-mega-menu-show"),this.state.activeMegaMenu===e&&(this.state.activeMegaMenu=null)}initGlobalEvents(){document.addEventListener("click",e=>{this.handleOutsideClick(e)}),document.addEventListener("keydown",e=>{this.handleKeydown(e)}),window.addEventListener("resize",this.debounce(()=>{this.handleResize()},250))}handleOutsideClick(e){const t=e.target.closest("[data-dropdown]")||e.target.closest(".te-navbar-dropdown-content"),s=e.target.closest(".te-navbar-link-has-mega-menu")||e.target.closest(".te-navbar-mega-menu"),n=e.target.closest(".te-navbar-link-has-submenu")||e.target.closest(".te-navbar-submenu-content"),o=e.target.closest(".te-navbar-toggle")||e.target.closest(".te-navbar-nav-mobile");t||this.closeAllDropdowns(),s||this.closeAllMegaMenus(),!n&&this.state.isTouch&&this.closeAllSubmenus(),o||this.closeAllMobileMenus()}handleKeydown(e){"Escape"===e.key&&this.closeAll()}handleResize(){window.innerWidth>=1024&&this.closeAllMobileMenus(),this.state.isTouch=this.isTouchDevice()}closeAll(){this.closeAllDropdowns(),this.closeAllMegaMenus(),this.closeAllSubmenus(),this.closeAllMobileMenus(),this.closeAllMobileSubmenus()}closeAllDropdowns(){this.elements.dropdownContents.forEach(e=>{e?.classList.remove("te-dropdown-show")}),this.state.activeDropdown=null}closeAllMegaMenus(){this.elements.megaMenus.forEach(e=>{e?.classList.remove("te-mega-menu-show")}),this.state.activeMegaMenu=null}closeAllSubmenus(){this.elements.submenuContents.forEach(e=>{e?.classList.remove("te-submenu-show")}),this.state.activeSubmenu=null}closeAllMobileMenus(){this.elements.mobileMenus.forEach((e,t)=>{e?.classList.remove("te-navbar-nav-mobile-show"),this.elements.toggles[t]&&this.toggleMenuIcon(this.elements.toggles[t],!1)}),this.closeAllMobileSubmenus(),this.state.mobileMenuOpen=!1}debounce(e,t){let s;return function(...n){clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),e(...n)},t)}}destroy(){this.closeAll()}}document.addEventListener("DOMContentLoaded",()=>{try{window.navbarManager=new NavbarManager}catch(e){}}),window.addEventListener("beforeunload",()=>{window.navbarManager&&window.navbarManager.destroy()});