<?php

$products = [
    [
        'id' => 1,
        'image' => 'assets/images/product-1.jpg',
        'hover' => 'assets/images/product-1-flip.jpg',
        'title' => 'Embroidered crew neck T-shirt',
        'price' => '720.00',
        'old_price' => '850.00',
        'colors' => ['blue', 'black', 'gray'],
        'sizes'  => ['SX', 'S', 'M', 'L', 'XL'],
        'category' => 'Mens',
        'badges' => [
            ['type' => 'sale', 'text' => 'SALE']
        ]
    ],
    [
        'id' => 2,
        'image' => 'assets/images/product-2.jpg',
        'hover' => 'assets/images/product-2-flip.jpg',
        'title' => 'Cute short-sleeved T-shirt with brand logo',
        'price' => '150.00',
        'old_price' => null,
        'colors' => ['white', 'green', 'orange'],
        'sizes'  => ['M', 'L'],
        'category' => 'Mens',
        'badges' => [
            ['type' => 'bestseller', 'text' => 'BEST SELLER']
        ]
    ],
    [
        'id' => 3,
        'image' => '',
        'title' => 'Long-sleeved shirt with brand logo embroidery',
        'price' => '450.00',
        'old_price' => null,
        'colors' => ['red', 'blue', 'white'],
        'sizes'  => ['40', '41', '42', '43'],
        'category' => 'Mens',
        'badges' => [
            ['type' => 'new', 'text' => 'NEW']
        ]
    ],
    [
        'id' => 4,
        'image' => 'assets/images/product-4.jpg',
        'title' => 'Straight-leg jeans',
        'price' => '1,200.00',
        'colors' => ['brown', 'orange'],
        'sizes'  => ['M', 'L'],
        'category' => 'Mens',
        'badges' => [
            ['type' => 'sale', 'text' => 'SALE']
        ]
    ],
    [
        'id' => 5,
        'image' => 'assets/images/product-6.jpg',
        'hover' => 'assets/images/product-6-2.jpg',
        'title' => 'Mercer 7 Inch Chino Shorts',
        'price' => '200.00',
        'old_price' => '300.00',
        'colors' => ['brown', 'orange'],
        'sizes'  => ['M', 'L'],
        'category' => 'Mens',
        'badges' => [
            ['type' => 'hot', 'text' => 'HOT']
        ]
    ],
    [
        'id' => 6,
        'image' => 'assets/images/425-1044mn001-4_ivory_2.jpg',
        'hover' => 'assets/images/425-1044mn001-4_ivory_4.jpg',
        'title' => 'Plain pants with a drawstring waist',
        'price' => '100.00',
        'colors' => ['white', 'black'],
        'sizes'  => ['SX', 'S', 'M', 'L', 'XL'],
        'category' => 'Mens'
    ],

    [
        'id' => 7,
        'image' => 'assets/images/product-7.jpg',
        'hover' => 'assets/images/product-7-flip.jpg',
        'title' => 'Floral Print Summer Dress',
        'price' => '890.00',
        'old_price' => '1200.00',
        'colors' => ['pink', 'white', 'yellow'],
        'sizes'  => ['XS', 'S', 'M', 'L', 'XL'],
        'category' => 'Womens',
        'badges' => [
            ['type' => 'sale', 'text' => 'SALE']
        ]
    ],
    [
        'id' => 8,
        'image' => 'assets/images/product-8.jpg',
        'hover' => 'assets/images/product-8-flip.jpg',
        'title' => 'High-Waisted Skinny Jeans',
        'price' => '650.00',
        'old_price' => null,
        'colors' => ['blue', 'black', 'white'],
        'sizes'  => ['24', '26', '28', '30', '32'],
        'category' => 'Womens',
        'badges' => [
            ['type' => 'new', 'text' => 'NEW']
        ]
    ],
    [
        'id' => 9,
        'image' => 'assets/images/product-9.jpg',
        'hover' => 'assets/images/product-9-flip.jpg',
        'title' => 'Silk Blouse with Bow Tie',
        'price' => '1150.00',
        'old_price' => '1400.00',
        'colors' => ['cream', 'black', 'navy'],
        'sizes'  => ['XS', 'S', 'M', 'L'],
        'category' => 'Womens',
        'badges' => [
            ['type' => 'limited', 'text' => 'LIMITED']
        ]
    ],
    [
        'id' => 10,
        'image' => 'assets/images/product-10.jpg',
        'hover' => 'assets/images/product-10-flip.jpg',
        'title' => 'Knitted Cardigan Sweater',
        'price' => '780.00',
        'old_price' => null,
        'colors' => ['beige', 'gray', 'burgundy'],
        'sizes'  => ['S', 'M', 'L', 'XL'],
        'category' => 'Womens',
        'badges' => [
            ['type' => 'bestseller', 'text' => 'BEST SELLER']
        ]
    ],

    [
        'id' => 11,
        'image' => 'assets/images/product-17.jpg',
        'hover' => 'assets/images/product-17-flip.jpg',
        'title' => 'Rainbow Unicorn T-Shirt',
        'price' => '180.00',
        'old_price' => '220.00',
        'colors' => ['pink', 'purple', 'white'],
        'sizes'  => ['40', '41', '42', '43'],
        'category' => 'Kids',
        'badges' => [
            ['type' => 'sale', 'text' => 'SALE']
        ]
    ],
    [
        'id' => 12,
        'image' => 'assets/images/product-18.jpg',
        'hover' => 'assets/images/product-18-flip.jpg',
        'title' => 'Dinosaur Print Hoodie',
        'price' => '280.00',
        'old_price' => null,
        'colors' => ['green', 'blue', 'gray'],
        'sizes'  => ['40', '41', '42', '43'],
        'category' => 'Kids',
        'badges' => [
            ['type' => 'hot', 'text' => 'HOT']
        ]
    ],
    [
        'id' => 13,
        'image' => 'assets/images/product-19.jpg',
        'hover' => 'assets/images/product-19-flip.jpg',
        'title' => 'Tutu Dress with Sparkles',
        'price' => '350.00',
        'old_price' => '450.00',
        'colors' => ['pink', 'purple', 'gold'],
        'sizes'  => ['40', '41', '42', '43'],
        'category' => 'Kids',
        'badges' => [
            ['type' => 'sale', 'text' => 'SALE']
        ]
    ],
    [
        'id' => 14,
        'image' => 'assets/images/product-20.jpg',
        'hover' => 'assets/images/product-20-flip.jpg',
        'title' => 'Superhero Cape Set',
        'price' => '320.00',
        'old_price' => null,
        'colors' => ['red', 'blue', 'black'],
        'sizes'  => ['40', '41', '42', '43'],
        'category' => 'Kids',
        'badges' => [
            ['type' => 'new', 'text' => 'NEW']
        ]
    ],
    [
        'id' => 15,
        'image' => 'assets/images/product-21.jpg',
        'hover' => 'assets/images/product-21-flip.jpg',
        'title' => 'Striped Overalls',
        'price' => '420.00',
        'old_price' => '500.00',
        'colors' => ['denim', 'white', 'pink'],
        'sizes'  => ['40', '41', '42', '43'],
        'category' => 'Kids',
        'badges' => [
            ['type' => 'limited', 'text' => 'LIMITED EDITION']
        ]
    ],

];

function render_products($products, $options = [])
{
    $selectedCategory = $options['category'] ?? null;
    $carousel = $options['carousel'] ?? false;
    $limit = $options['limit'] ?? null;

    $count = 0;

    foreach ($products as $product) {
        if ($selectedCategory && $product['category'] !== $selectedCategory) continue;

        if ($limit !== null && $count >= $limit) break;

        if ($carousel) {
            echo '<div class="embla__slide flex-shrink-0 py-1 [flex:0_0_calc(50%-0.75rem)] md:[flex:0_0_calc(33.333%-0.75rem)] lg:[flex:0_0_calc(25%-1.2rem)]">';
        }

        include 'template-parts/product/product-content.php';

        if ($carousel) {
            echo '</div>';
        }

        $count++;
    }
}